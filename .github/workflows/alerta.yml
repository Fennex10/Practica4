name: Hola Mundo + Notificaci√≥n Profesional

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest
    name: Ejecutar Hola Mundo y Notificar

    steps:
      # 1Ô∏è‚É£ Descargar el c√≥digo del repositorio
      - name: Checkout del c√≥digo
        uses: actions/checkout@v3

      # 2Ô∏è‚É£ Configurar Node.js (GitHub Actions lo instala autom√°ticamente)
      - name: Configurar Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      # 3Ô∏è‚É£ Mostrar contenido de index.js
      - name: Mostrar contenido de index.js
        run: |
          echo "üìÑ Contenido de index.js:"
          echo "------------------------"
          cat index.js
          echo "------------------------"

      # 4Ô∏è‚É£ Ejecutar Hola Mundo
      - name: Ejecutar Hola Mundo
        run: |
          echo "üöÄ Ejecutando index.js..."
          node index.js

      # 5Ô∏è‚É£ Enviar notificaci√≥n a ntfy.sh
      - name: Enviar notificaci√≥n
        run: |
          OUTPUT=$(node index.js)
          curl -d "‚úÖ Se ejecut√≥ Hola Mundo en $GITHUB_REPOSITORY (rama main). Salida: $OUTPUT" \
               https://ntfy.sh/devops-itla
